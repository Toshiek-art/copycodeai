---
// src/pages/writing/writing.astro
import { sanityClient } from "../../lib/sanity"; // <-- IMPORTAZIONE CORRETTA
import BaseLayout from "../../layouts/BaseLayout.astro";

const query = `*[_type == "post"] | order(publishedAt desc)`;
const posts = await sanityClient.fetch(query);
---

<BaseLayout title="Writing" page="writing">
  <div class="container mx-auto px-4 py-12">
    <h1 class="text-4xl font-bold mb-8">Dal mio Blog</h1>

    <ul class="space-y-6">
      {
        posts.map((post) => (
          <li>
            <a href={`/writing/${post.slug.current}`} class="block p-4 border rounded-lg hover:bg-gray-100">
              <h2 class="text-2xl font-semibold">{post.title}</h2>
              <p class="text-gray-600 mt-2">
                Pubblicato il: {new Date(post.publishedAt).toLocaleDateString('it-IT')}
              </p>
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</BaseLayout>
